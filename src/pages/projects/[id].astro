---
import Layout from '@layouts/Layout.astro';
import type { GetStaticPaths } from 'astro';
import { Image } from 'astro:assets';
import { render } from 'astro:content';
import { getCollection } from 'astro:content';

export const getStaticPaths = (async () => {
  const projects = await getCollection('projects');

  return projects.map((project) => ({
    params: { id: project.id },
    props: {
      project,
    },
  }));
}) satisfies GetStaticPaths;

const { project } = Astro.props;
const { title, description, img } = project.data;
const { Content } = await render(project);
---

<Layout>
  <div class="flex gap-4">
    <div class="mt-4">
      <Image
        transition:name={project.id}
        src={img}
        alt={title}
        class="w-48 h-auto rounded-lg"
      />
    </div>

    <div class="text-left m-4">
      <h1 class="text-6xl mb-4">{title}</h1>
      <p class="text-2xl">{description}</p>
    </div>
  </div>
  <div class="mt-4">
    <Content />
  </div>
</Layout>
